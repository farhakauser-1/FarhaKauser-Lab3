{"ast":null,"code":"import _regeneratorRuntime from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/src/components/Displayitems.js\";\nimport React, { Component } from 'react'; // import \"../../App.css\";\n\nimport { withApollo } from 'react-apollo';\nimport { Redirect } from 'react-router';\nimport { addsection, additem } from '../mutation/mutations';\nimport { getBuyersQuery, login, menusearch } from '../queries/queries';\n\nvar Displayitems =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Displayitems, _Component);\n\n  function Displayitems(props) {\n    var _this;\n\n    _classCallCheck(this, Displayitems);\n\n    // Call the constrictor of Super class i.e The Component\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Displayitems).call(this, props)); // maintain the state required for this component\n\n    _this.addToMenu = function (e) {\n      if (_this.state.itemname && _this.state.description && _this.state.price) {\n        e.preventDefault();\n        console.log(e.target.id);\n        var dummy = _this.state.ITEMLIST;\n        console.log('Before' + JSON.stringify(dummy));\n        console.log('Proper' + dummy);\n        dummy.forEach(function (iteration) {\n          console.log(iteration);\n\n          if (iteration.Section == e.target.id) {\n            var data = {\n              item: _this.state.itemname,\n              cost: _this.state.price\n            };\n            iteration.items.push(data);\n          }\n\n          console.log('After' + JSON.stringify(dummy));\n        });\n\n        _this.setState({\n          ITEMLIST: dummy\n        });\n\n        var data = {\n          Section: e.target.id,\n          RestaurantName: localStorage.getItem('RestaurantName'),\n          Menu: _this.state.ITEMLIST,\n          item: _this.state.itemname,\n          cost: _this.state.price\n        };\n        console.log(data); //   axios\n        //     .post(`${ROOT_URL}/additems/`, data, {\n        //       headers: { Authorization: `Bearer ${localStorage.getItem('JWT')}` }\n        //     })\n        //     .then(response => {\n        //       console.log('Onclick')\n        //       console.log(dummy)\n        //       console.log(response.data)\n        //       if (response.data == 'Success') {\n        //         // dummy.push(data)\n        //         // this.setState({ ITEMLIST: dummy })\n        //         console.log(dummy)\n        //       }\n        //     })\n        //     .catch(() => {\n        //       console.log('Hello')\n        //       this.props.history.push('/owner/ownerlogin')\n        //     })\n        //   this.setState({ itemname: '' })\n        //   this.setState({ description: '' })\n        //   this.setState({ price: '' })\n        // }\n\n        console.log(localStorage.getItem('name'));\n        console.log(_this.state.addcategory);\n\n        _this.props.client.mutate({\n          mutation: additem,\n          variables: {\n            email: localStorage.getItem('name'),\n            sectionName: e.target.id,\n            itemName: _this.state.itemname,\n            itemDescription: _this.state.description,\n            itemPrice: _this.state.price\n          }\n        }).then(function (response) {\n          console.log(response.data.additem);\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }\n    };\n\n    _this.addcategory = function (e) {\n      console.log('here');\n\n      if (_this.state.addcategory) {\n        e.preventDefault();\n\n        _this.func();\n      }\n    };\n\n    _this.handleChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.id, event.target.value));\n    };\n\n    _this.state = {\n      nameOfRestaurant: localStorage.getItem('RestaurantName'),\n      ITEMLIST: [],\n      price: '',\n      description: '',\n      itemname: '',\n      addcategory: ''\n    };\n    _this.addToMenu = _this.addToMenu.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addcategory = _this.addcategory.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.deleteItem = _this.deleteItem.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.deleteCategory = _this.deleteCategory.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.updateItem = _this.updateItem.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Displayitems, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var dumm;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                dumm = [];\n                _context.next = 3;\n                return this.props.client.query({\n                  query: menusearch,\n                  variables: {\n                    restaurant: 'Oioio'\n                  }\n                }).then(function (response) {\n                  console.log(response.data);\n                  var val = response.data.menusearch.sections;\n\n                  for (var i = 0; i < val.length; i++) {\n                    var obj = {\n                      Section: '',\n                      items: []\n                    };\n                    obj.Section = val[i].name;\n\n                    for (var j = 0; j < val[i].itemslist.length; j++) {\n                      var obj2 = {\n                        item: val[i].itemslist[j].item,\n                        cost: val[i].itemslist[j].cost\n                      };\n                      obj.items.push(obj2);\n                    }\n\n                    dumm.push(obj);\n                  }\n                });\n\n              case 3:\n                console.log('dumm');\n                console.log(dumm);\n                this.setState({\n                  ITEMLIST: dumm\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"func\",\n    value: function () {\n      var _func = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var dumm;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                dumm = [];\n                _context2.next = 3;\n                return this.props.client.query({\n                  query: menusearch,\n                  variables: {\n                    restaurant: this.state.addcategory\n                  }\n                }).then(function (response) {\n                  console.log(response.data);\n                  var val = response.data.menusearch.sections;\n\n                  for (var i = 0; i < val.length; i++) {\n                    var obj = {\n                      Section: '',\n                      items: []\n                    };\n                    obj.Section = val[i].name;\n\n                    for (var j = 0; j < val[i].itemslist.length; j++) {\n                      var obj2 = {\n                        item: val[i].itemslist[j].item,\n                        cost: val[i].itemslist[j].cost\n                      };\n                      obj.items.push(obj2);\n                    }\n\n                    dumm.push(obj);\n                  }\n                });\n\n              case 3:\n                console.log('dumm');\n                console.log(dumm);\n                this.setState({\n                  ITEMLIST: dumm\n                });\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function func() {\n        return _func.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"updateItem\",\n    value: function updateItem(x, it) {\n      localStorage.setItem('updateitem', JSON.stringify(x));\n      localStorage.setItem('updatecategory', it.Section);\n      this.props.history.push('/owner/updateitem');\n    }\n  }, {\n    key: \"deleteCategory\",\n    value: function deleteCategory(it) {\n      console.log(it);\n      var array = this.state.ITEMLIST;\n      console.log('Before Deletetion' + JSON.stringify(this.state.ITEMLIST));\n\n      for (var i in array) {\n        console.log('yo');\n        if (array[i].Section == it.Section) array.splice(i, 1);\n      }\n\n      console.log(array);\n      this.setState({\n        ITEMLIST: array\n      });\n      var data = {\n        newmenu: this.state.ITEMLIST,\n        RestaurantName: localStorage.getItem('RestaurantName')\n      };\n      console.log(data); // axios\n      //   .post(`${ROOT_URL}/deleteitems/`, data, {\n      //     headers: { Authorization: `Bearer ${localStorage.getItem('JWT')}` }\n      //   })\n      //   .then(response => {\n      //     console.log('Deleted')\n      //     console.log(response.data)\n      //   })\n    }\n  }, {\n    key: \"deleteItem\",\n    value: function deleteItem(it) {\n      var deleteable = it.split('-');\n      console.log('Section and item' + deleteable);\n      var array = this.state.ITEMLIST; // make a separate copy of the array\n\n      console.log(this.setState.ITEMLIST);\n\n      for (var i in array) {\n        if (array[i].Section === deleteable[0]) {\n          console.log('Index found' + i);\n          console.log(array[i]); // got section\n\n          for (var j in array[i].items) {\n            if (array[i].items[j].item == deleteable[1]) {\n              console.log('In second loop' + array[i].items[j].item);\n              break;\n            }\n          }\n\n          array[i].items.splice(j, 1);\n          this.setState({\n            ITEMLIST: array\n          });\n          console.log(this.setState.ITEMLIST);\n          {\n            var data = {\n              newmenu: this.state.ITEMLIST,\n              RestaurantName: localStorage.getItem('RestaurantName'),\n              item: deleteable[1]\n            };\n            console.log(data); //   axios.post(`${ROOT_URL}/deleteitems/`, data).then(response => {\n            //     console.log('Deleted')\n            //     console.log(response.data)\n            //   })\n          }\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var redirectVar = null;\n      var noitems = null;\n      /* if (!cookie.load('owner')) {\n        console.log('checking redirection')\n        redirectVar = <Redirect to='/owner/ownerlogin' />\n      } */\n\n      var arr = this.state.ITEMLIST;\n      console.log('length' + arr.length);\n      arr.forEach(function (x) {\n        console.log(x.Section);\n      });\n      setTimeout(function () {\n        console.log('Going to check length');\n      }, 2000);\n\n      if (arr.length === 0) {\n        noitems = null;\n      } else {\n        if (this.state && this.state.ITEMLIST) {\n          noitems = React.createElement(\"table\", {\n            class: \"table\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 257\n            },\n            __self: this\n          }, React.createElement(\"tbody\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 258\n            },\n            __self: this\n          }, this.state.ITEMLIST.map(function (it) {\n            return React.createElement(\"tr\", {\n              key: it.Section,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 260\n              },\n              __self: this\n            }, React.createElement(\"thead\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 261\n              },\n              __self: this\n            }, React.createElement(\"th\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 262\n              },\n              __self: this\n            }, React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 263\n              },\n              __self: this\n            }, React.createElement(\"h3\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 264\n              },\n              __self: this\n            }, \"SECTION NAME:\", it.Section))), React.createElement(\"tr\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 267\n              },\n              __self: this\n            }, React.createElement(\"th\", {\n              scope: \"Restaurant\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 268\n              },\n              __self: this\n            }, \"ITEMS\"), React.createElement(\"th\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 270\n              },\n              __self: this\n            }, \"PRICE \")), it.items ? it.items.length : 0), it.items ? it.items.map(function (x) {\n              return React.createElement(\"tr\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 276\n                },\n                __self: this\n              }, React.createElement(\"td\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 277\n                },\n                __self: this\n              }, x.item), React.createElement(\"td\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 279\n                },\n                __self: this\n              }, x.cost));\n            }) : null);\n          })));\n        }\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        align: \"left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        id: \"addcategory\",\n        type: \"text\",\n        value: this.state.addcategory,\n        onChange: this.handleChange,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        id: \"addcategory\",\n        className: \"btn btn-secondary m-2\",\n        onClick: this.addcategory,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, \"SEARCH\"))), React.createElement(\"div\", {\n        class: \"card\\xA0text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"btn-primary\\xA0m-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, localStorage.getItem('RestaurantName'), \"\\xA0ALL RESTAURANT ITEMS\")), noitems);\n    }\n  }]);\n\n  return Displayitems;\n}(Component);\n\nexport default withApollo(Displayitems);","map":{"version":3,"sources":["/Users/farha/Downloads/GraphQL/GraphQL/frontend/src/components/Displayitems.js"],"names":["React","Component","withApollo","Redirect","addsection","additem","getBuyersQuery","login","menusearch","Displayitems","props","addToMenu","e","state","itemname","description","price","preventDefault","console","log","target","id","dummy","ITEMLIST","JSON","stringify","forEach","iteration","Section","data","item","cost","items","push","setState","RestaurantName","localStorage","getItem","Menu","addcategory","client","mutate","mutation","variables","email","sectionName","itemName","itemDescription","itemPrice","then","response","catch","err","func","handleChange","event","value","nameOfRestaurant","bind","deleteItem","deleteCategory","updateItem","dumm","query","restaurant","val","sections","i","length","obj","name","j","itemslist","obj2","x","it","setItem","history","array","splice","newmenu","deleteable","split","redirectVar","noitems","arr","setTimeout","map"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC,C,CACA;;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,SAASC,UAAT,EAAqBC,OAArB,QAAoC,uBAApC;AACA,SAASC,cAAT,EAAyBC,KAAzB,EAAgCC,UAAhC,QAAkD,oBAAlD;;IAEMC,Y;;;;;AACJ,wBAAaC,KAAb,EAAoB;AAAA;;AAAA;;AAClB;AACA,sFAAMA,KAAN,GAFkB,CAGlB;;AAHkB,UAmFpBC,SAnFoB,GAmFR,UAAAC,CAAC,EAAI;AACf,UAAI,MAAKC,KAAL,CAAWC,QAAX,IAAuB,MAAKD,KAAL,CAAWE,WAAlC,IAAiD,MAAKF,KAAL,CAAWG,KAAhE,EAAuE;AACrEJ,QAAAA,CAAC,CAACK,cAAF;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYP,CAAC,CAACQ,MAAF,CAASC,EAArB;AACA,YAAIC,KAAK,GAAG,MAAKT,KAAL,CAAWU,QAAvB;AACAL,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAWK,IAAI,CAACC,SAAL,CAAeH,KAAf,CAAvB;AACAJ,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAWG,KAAvB;AACAA,QAAAA,KAAK,CAACI,OAAN,CAAc,UAAAC,SAAS,EAAI;AACzBT,UAAAA,OAAO,CAACC,GAAR,CAAYQ,SAAZ;;AACA,cAAIA,SAAS,CAACC,OAAV,IAAqBhB,CAAC,CAACQ,MAAF,CAASC,EAAlC,EAAsC;AACpC,gBAAIQ,IAAI,GAAG;AAAEC,cAAAA,IAAI,EAAE,MAAKjB,KAAL,CAAWC,QAAnB;AAA6BiB,cAAAA,IAAI,EAAE,MAAKlB,KAAL,CAAWG;AAA9C,aAAX;AAEAW,YAAAA,SAAS,CAACK,KAAV,CAAgBC,IAAhB,CAAqBJ,IAArB;AACD;;AACDX,UAAAA,OAAO,CAACC,GAAR,CAAY,UAAUK,IAAI,CAACC,SAAL,CAAeH,KAAf,CAAtB;AACD,SARD;;AASA,cAAKY,QAAL,CAAc;AAAEX,UAAAA,QAAQ,EAAED;AAAZ,SAAd;;AACA,YAAIO,IAAI,GAAG;AACTD,UAAAA,OAAO,EAAEhB,CAAC,CAACQ,MAAF,CAASC,EADT;AAETc,UAAAA,cAAc,EAAEC,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAFP;AAGTC,UAAAA,IAAI,EAAE,MAAKzB,KAAL,CAAWU,QAHR;AAITO,UAAAA,IAAI,EAAE,MAAKjB,KAAL,CAAWC,QAJR;AAKTiB,UAAAA,IAAI,EAAE,MAAKlB,KAAL,CAAWG;AALR,SAAX;AAOAE,QAAAA,OAAO,CAACC,GAAR,CAAYU,IAAZ,EAvBqE,CAwBrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAX,QAAAA,OAAO,CAACC,GAAR,CAAYiB,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAZ;AACAnB,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAKN,KAAL,CAAW0B,WAAvB;;AACA,cAAK7B,KAAL,CAAW8B,MAAX,CACGC,MADH,CACU;AACNC,UAAAA,QAAQ,EAAErC,OADJ;AAENsC,UAAAA,SAAS,EAAE;AACTC,YAAAA,KAAK,EAAER,YAAY,CAACC,OAAb,CAAqB,MAArB,CADE;AAETQ,YAAAA,WAAW,EAAEjC,CAAC,CAACQ,MAAF,CAASC,EAFb;AAGTyB,YAAAA,QAAQ,EAAE,MAAKjC,KAAL,CAAWC,QAHZ;AAITiC,YAAAA,eAAe,EAAE,MAAKlC,KAAL,CAAWE,WAJnB;AAKTiC,YAAAA,SAAS,EAAE,MAAKnC,KAAL,CAAWG;AALb;AAFL,SADV,EAWGiC,IAXH,CAWQ,UAAAC,QAAQ,EAAI;AAChBhC,UAAAA,OAAO,CAACC,GAAR,CAAY+B,QAAQ,CAACrB,IAAT,CAAcxB,OAA1B;AACD,SAbH,EAcG8C,KAdH,CAcS,UAAAC,GAAG,EAAI;AACZlC,UAAAA,OAAO,CAACC,GAAR,CAAYiC,GAAZ;AACD,SAhBH;AAiBD;AACF,KAtJmB;;AAAA,UAuJpBb,WAvJoB,GAuJN,UAAA3B,CAAC,EAAI;AACjBM,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;;AACA,UAAI,MAAKN,KAAL,CAAW0B,WAAf,EAA4B;AAC1B3B,QAAAA,CAAC,CAACK,cAAF;;AAEA,cAAKoC,IAAL;AACD;AACF,KA9JmB;;AAAA,UA8NpBC,YA9NoB,GA8NL,UAAAC,KAAK,EAAI;AACtB,YAAKrB,QAAL,qBACGqB,KAAK,CAACnC,MAAN,CAAaC,EADhB,EACqBkC,KAAK,CAACnC,MAAN,CAAaoC,KADlC;AAGD,KAlOmB;;AAIlB,UAAK3C,KAAL,GAAa;AACX4C,MAAAA,gBAAgB,EAAErB,YAAY,CAACC,OAAb,CAAqB,gBAArB,CADP;AAEXd,MAAAA,QAAQ,EAAE,EAFC;AAGXP,MAAAA,KAAK,EAAE,EAHI;AAIXD,MAAAA,WAAW,EAAE,EAJF;AAKXD,MAAAA,QAAQ,EAAE,EALC;AAMXyB,MAAAA,WAAW,EAAE;AANF,KAAb;AAQA,UAAK5B,SAAL,GAAiB,MAAKA,SAAL,CAAe+C,IAAf,uDAAjB;AACA,UAAKnB,WAAL,GAAmB,MAAKA,WAAL,CAAiBmB,IAAjB,uDAAnB;AACA,UAAKJ,YAAL,GAAoB,MAAKA,YAAL,CAAkBI,IAAlB,uDAApB;AACA,UAAKC,UAAL,GAAkB,MAAKA,UAAL,CAAgBD,IAAhB,uDAAlB;AACA,UAAKE,cAAL,GAAsB,MAAKA,cAAL,CAAoBF,IAApB,uDAAtB;AACA,UAAKG,UAAL,GAAkB,MAAKA,UAAL,CAAgBH,IAAhB,uDAAlB;AAjBkB;AAkBnB;;;;;;;;;;;;;AAEKI,gBAAAA,I,GAAO,E;;uBACL,KAAKpD,KAAL,CAAW8B,MAAX,CACHuB,KADG,CACG;AACLA,kBAAAA,KAAK,EAAEvD,UADF;AAELmC,kBAAAA,SAAS,EAAE;AACTqB,oBAAAA,UAAU,EAAE;AADH;AAFN,iBADH,EAOHf,IAPG,CAOE,UAAAC,QAAQ,EAAI;AAChBhC,kBAAAA,OAAO,CAACC,GAAR,CAAY+B,QAAQ,CAACrB,IAArB;AACA,sBAAIoC,GAAG,GAAGf,QAAQ,CAACrB,IAAT,CAAcrB,UAAd,CAAyB0D,QAAnC;;AACA,uBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,GAAG,CAACG,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACnC,wBAAIE,GAAG,GAAG;AACRzC,sBAAAA,OAAO,EAAE,EADD;AAERI,sBAAAA,KAAK,EAAE;AAFC,qBAAV;AAIAqC,oBAAAA,GAAG,CAACzC,OAAJ,GAAcqC,GAAG,CAACE,CAAD,CAAH,CAAOG,IAArB;;AACA,yBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,GAAG,CAACE,CAAD,CAAH,CAAOK,SAAP,CAAiBJ,MAArC,EAA6CG,CAAC,EAA9C,EAAkD;AAChD,0BAAIE,IAAI,GAAG;AACT3C,wBAAAA,IAAI,EAAEmC,GAAG,CAACE,CAAD,CAAH,CAAOK,SAAP,CAAiBD,CAAjB,EAAoBzC,IADjB;AAETC,wBAAAA,IAAI,EAAEkC,GAAG,CAACE,CAAD,CAAH,CAAOK,SAAP,CAAiBD,CAAjB,EAAoBxC;AAFjB,uBAAX;AAIAsC,sBAAAA,GAAG,CAACrC,KAAJ,CAAUC,IAAV,CAAewC,IAAf;AACD;;AACDX,oBAAAA,IAAI,CAAC7B,IAAL,CAAUoC,GAAV;AACD;AACF,iBAzBG,C;;;AA0BNnD,gBAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAY2C,IAAZ;AACA,qBAAK5B,QAAL,CAAc;AAAEX,kBAAAA,QAAQ,EAAEuC;AAAZ,iBAAd;;;;;;;;;;;;;;;;;;;;;;;;;AAGIA,gBAAAA,I,GAAO,E;;uBACL,KAAKpD,KAAL,CAAW8B,MAAX,CACHuB,KADG,CACG;AACLA,kBAAAA,KAAK,EAAEvD,UADF;AAELmC,kBAAAA,SAAS,EAAE;AACTqB,oBAAAA,UAAU,EAAE,KAAKnD,KAAL,CAAW0B;AADd;AAFN,iBADH,EAOHU,IAPG,CAOE,UAAAC,QAAQ,EAAI;AAChBhC,kBAAAA,OAAO,CAACC,GAAR,CAAY+B,QAAQ,CAACrB,IAArB;AACA,sBAAIoC,GAAG,GAAGf,QAAQ,CAACrB,IAAT,CAAcrB,UAAd,CAAyB0D,QAAnC;;AACA,uBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,GAAG,CAACG,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACnC,wBAAIE,GAAG,GAAG;AACRzC,sBAAAA,OAAO,EAAE,EADD;AAERI,sBAAAA,KAAK,EAAE;AAFC,qBAAV;AAIAqC,oBAAAA,GAAG,CAACzC,OAAJ,GAAcqC,GAAG,CAACE,CAAD,CAAH,CAAOG,IAArB;;AACA,yBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,GAAG,CAACE,CAAD,CAAH,CAAOK,SAAP,CAAiBJ,MAArC,EAA6CG,CAAC,EAA9C,EAAkD;AAChD,0BAAIE,IAAI,GAAG;AACT3C,wBAAAA,IAAI,EAAEmC,GAAG,CAACE,CAAD,CAAH,CAAOK,SAAP,CAAiBD,CAAjB,EAAoBzC,IADjB;AAETC,wBAAAA,IAAI,EAAEkC,GAAG,CAACE,CAAD,CAAH,CAAOK,SAAP,CAAiBD,CAAjB,EAAoBxC;AAFjB,uBAAX;AAIAsC,sBAAAA,GAAG,CAACrC,KAAJ,CAAUC,IAAV,CAAewC,IAAf;AACD;;AACDX,oBAAAA,IAAI,CAAC7B,IAAL,CAAUoC,GAAV;AACD;AACF,iBAzBG,C;;;AA0BNnD,gBAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAY2C,IAAZ;AACA,qBAAK5B,QAAL,CAAc;AAAEX,kBAAAA,QAAQ,EAAEuC;AAAZ,iBAAd;;;;;;;;;;;;;;;;+BA+EUY,C,EAAGC,E,EAAI;AACjBvC,MAAAA,YAAY,CAACwC,OAAb,CAAqB,YAArB,EAAmCpD,IAAI,CAACC,SAAL,CAAeiD,CAAf,CAAnC;AACAtC,MAAAA,YAAY,CAACwC,OAAb,CAAqB,gBAArB,EAAuCD,EAAE,CAAC/C,OAA1C;AACA,WAAKlB,KAAL,CAAWmE,OAAX,CAAmB5C,IAAnB,CAAwB,mBAAxB;AACD;;;mCACe0C,E,EAAI;AAClBzD,MAAAA,OAAO,CAACC,GAAR,CAAYwD,EAAZ;AACA,UAAIG,KAAK,GAAG,KAAKjE,KAAL,CAAWU,QAAvB;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAsBK,IAAI,CAACC,SAAL,CAAe,KAAKZ,KAAL,CAAWU,QAA1B,CAAlC;;AACA,WAAK,IAAI4C,CAAT,IAAcW,KAAd,EAAqB;AACnB5D,QAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACA,YAAI2D,KAAK,CAACX,CAAD,CAAL,CAASvC,OAAT,IAAoB+C,EAAE,CAAC/C,OAA3B,EAAoCkD,KAAK,CAACC,MAAN,CAAaZ,CAAb,EAAgB,CAAhB;AACrC;;AACDjD,MAAAA,OAAO,CAACC,GAAR,CAAY2D,KAAZ;AACA,WAAK5C,QAAL,CAAc;AAAEX,QAAAA,QAAQ,EAAEuD;AAAZ,OAAd;AACA,UAAIjD,IAAI,GAAG;AACTmD,QAAAA,OAAO,EAAE,KAAKnE,KAAL,CAAWU,QADX;AAETY,QAAAA,cAAc,EAAEC,YAAY,CAACC,OAAb,CAAqB,gBAArB;AAFP,OAAX;AAIAnB,MAAAA,OAAO,CAACC,GAAR,CAAYU,IAAZ,EAdkB,CAelB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;;;+BACW8C,E,EAAI;AACd,UAAIM,UAAU,GAAGN,EAAE,CAACO,KAAH,CAAS,GAAT,CAAjB;AACAhE,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAqB8D,UAAjC;AACA,UAAIH,KAAK,GAAG,KAAKjE,KAAL,CAAWU,QAAvB,CAHc,CAGkB;;AAChCL,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKe,QAAL,CAAcX,QAA1B;;AACA,WAAK,IAAI4C,CAAT,IAAcW,KAAd,EAAqB;AACnB,YAAIA,KAAK,CAACX,CAAD,CAAL,CAASvC,OAAT,KAAqBqD,UAAU,CAAC,CAAD,CAAnC,EAAwC;AACtC/D,UAAAA,OAAO,CAACC,GAAR,CAAY,gBAAgBgD,CAA5B;AACAjD,UAAAA,OAAO,CAACC,GAAR,CAAY2D,KAAK,CAACX,CAAD,CAAjB,EAFsC,CAEhB;;AACtB,eAAK,IAAII,CAAT,IAAcO,KAAK,CAACX,CAAD,CAAL,CAASnC,KAAvB,EAA8B;AAC5B,gBAAI8C,KAAK,CAACX,CAAD,CAAL,CAASnC,KAAT,CAAeuC,CAAf,EAAkBzC,IAAlB,IAA0BmD,UAAU,CAAC,CAAD,CAAxC,EAA6C;AAC3C/D,cAAAA,OAAO,CAACC,GAAR,CAAY,mBAAmB2D,KAAK,CAACX,CAAD,CAAL,CAASnC,KAAT,CAAeuC,CAAf,EAAkBzC,IAAjD;AACA;AACD;AACF;;AACDgD,UAAAA,KAAK,CAACX,CAAD,CAAL,CAASnC,KAAT,CAAe+C,MAAf,CAAsBR,CAAtB,EAAyB,CAAzB;AACA,eAAKrC,QAAL,CAAc;AAAEX,YAAAA,QAAQ,EAAEuD;AAAZ,WAAd;AACA5D,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKe,QAAL,CAAcX,QAA1B;AACA;AACE,gBAAIM,IAAI,GAAG;AACTmD,cAAAA,OAAO,EAAE,KAAKnE,KAAL,CAAWU,QADX;AAETY,cAAAA,cAAc,EAAEC,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAFP;AAGTP,cAAAA,IAAI,EAAEmD,UAAU,CAAC,CAAD;AAHP,aAAX;AAKA/D,YAAAA,OAAO,CAACC,GAAR,CAAYU,IAAZ,EANF,CAOE;AACA;AACA;AACA;AACD;AACF;AACF;AACF;;;6BAMS;AACR,UAAIsD,WAAW,GAAG,IAAlB;AACA,UAAIC,OAAO,GAAG,IAAd;AACA;;;;;AAIA,UAAIC,GAAG,GAAG,KAAKxE,KAAL,CAAWU,QAArB;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAWkE,GAAG,CAACjB,MAA3B;AACAiB,MAAAA,GAAG,CAAC3D,OAAJ,CAAY,UAAAgD,CAAC,EAAI;AACfxD,QAAAA,OAAO,CAACC,GAAR,CAAYuD,CAAC,CAAC9C,OAAd;AACD,OAFD;AAIA0D,MAAAA,UAAU,CAAC,YAAY;AACrBpE,QAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACD,OAFS,EAEP,IAFO,CAAV;;AAGA,UAAIkE,GAAG,CAACjB,MAAJ,KAAe,CAAnB,EAAsB;AACpBgB,QAAAA,OAAO,GAAG,IAAV;AACD,OAFD,MAEO;AACL,YAAI,KAAKvE,KAAL,IAAc,KAAKA,KAAL,CAAWU,QAA7B,EAAuC;AACrC6D,UAAAA,OAAO,GACL;AAAO,YAAA,KAAK,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACG,KAAKvE,KAAL,CAAWU,QAAX,CAAoBgE,GAApB,CAAwB,UAAAZ,EAAE;AAAA,mBACzB;AAAI,cAAA,GAAG,EAAEA,EAAE,CAAC/C,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAAkB+C,EAAE,CAAC/C,OAArB,CADF,CADF,CADF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACE;AAAI,cAAA,KAAK,EAAC,YAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAHF,CANF,EAWG+C,EAAE,CAAC3C,KAAH,GAAW2C,EAAE,CAAC3C,KAAH,CAASoC,MAApB,GAA6B,CAXhC,CADF,EAcGO,EAAE,CAAC3C,KAAH,GACG2C,EAAE,CAAC3C,KAAH,CAASuD,GAAT,CAAa,UAAAb,CAAC;AAAA,qBACd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAKA,CAAC,CAAC5C,IAAP,CADF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAK4C,CAAC,CAAC3C,IAAP,CAHF,CADc;AAAA,aAAd,CADH,GAQG,IAtBN,CADyB;AAAA,WAA1B,CADH,CADF,CADF;AAgCD;AACF;;AAED,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,KAAK,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,EAAE,EAAC,aADL;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,KAAK,EAAE,KAAKlB,KAAL,CAAW0B,WAHpB;AAIE,QAAA,QAAQ,EAAE,KAAKe,YAJjB;AAKE,QAAA,QAAQ,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EASE;AACE,QAAA,EAAE,EAAC,aADL;AAEE,QAAA,SAAS,EAAC,uBAFZ;AAGE,QAAA,OAAO,EAAE,KAAKf,WAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBATF,CADF,CADF,EAoBE;AAAK,QAAA,KAAK,EAAC,qBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,SAAS,EAAC,oBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGH,YAAY,CAACC,OAAb,CAAqB,gBAArB,CADH,6BADF,CApBF,EA0BG+C,OA1BH,CADF;AA8BD;;;;EAzTwBnF,S;;AA4T3B,eAAeC,UAAU,CAACO,YAAD,CAAzB","sourcesContent":["import React, { Component } from 'react'\n// import \"../../App.css\";\nimport { withApollo } from 'react-apollo'\nimport { Redirect } from 'react-router'\nimport { addsection, additem } from '../mutation/mutations'\nimport { getBuyersQuery, login, menusearch } from '../queries/queries'\n\nclass Displayitems extends Component {\n  constructor (props) {\n    // Call the constrictor of Super class i.e The Component\n    super(props)\n    // maintain the state required for this component\n    this.state = {\n      nameOfRestaurant: localStorage.getItem('RestaurantName'),\n      ITEMLIST: [],\n      price: '',\n      description: '',\n      itemname: '',\n      addcategory: ''\n    }\n    this.addToMenu = this.addToMenu.bind(this)\n    this.addcategory = this.addcategory.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n    this.deleteItem = this.deleteItem.bind(this)\n    this.deleteCategory = this.deleteCategory.bind(this)\n    this.updateItem = this.updateItem.bind(this)\n  }\n  async componentDidMount () {\n    var dumm = []\n    await this.props.client\n      .query({\n        query: menusearch,\n        variables: {\n          restaurant: 'Oioio'\n        }\n      })\n      .then(response => {\n        console.log(response.data)\n        let val = response.data.menusearch.sections\n        for (let i = 0; i < val.length; i++) {\n          var obj = {\n            Section: '',\n            items: []\n          }\n          obj.Section = val[i].name\n          for (let j = 0; j < val[i].itemslist.length; j++) {\n            var obj2 = {\n              item: val[i].itemslist[j].item,\n              cost: val[i].itemslist[j].cost\n            }\n            obj.items.push(obj2)\n          }\n          dumm.push(obj)\n        }\n      })\n    console.log('dumm')\n    console.log(dumm)\n    this.setState({ ITEMLIST: dumm })\n  }\n  async func () {\n    var dumm = []\n    await this.props.client\n      .query({\n        query: menusearch,\n        variables: {\n          restaurant: this.state.addcategory\n        }\n      })\n      .then(response => {\n        console.log(response.data)\n        let val = response.data.menusearch.sections\n        for (let i = 0; i < val.length; i++) {\n          var obj = {\n            Section: '',\n            items: []\n          }\n          obj.Section = val[i].name\n          for (let j = 0; j < val[i].itemslist.length; j++) {\n            var obj2 = {\n              item: val[i].itemslist[j].item,\n              cost: val[i].itemslist[j].cost\n            }\n            obj.items.push(obj2)\n          }\n          dumm.push(obj)\n        }\n      })\n    console.log('dumm')\n    console.log(dumm)\n    this.setState({ ITEMLIST: dumm })\n  }\n  addToMenu = e => {\n    if (this.state.itemname && this.state.description && this.state.price) {\n      e.preventDefault()\n      console.log(e.target.id)\n      var dummy = this.state.ITEMLIST\n      console.log('Before' + JSON.stringify(dummy))\n      console.log('Proper' + dummy)\n      dummy.forEach(iteration => {\n        console.log(iteration)\n        if (iteration.Section == e.target.id) {\n          var data = { item: this.state.itemname, cost: this.state.price }\n\n          iteration.items.push(data)\n        }\n        console.log('After' + JSON.stringify(dummy))\n      })\n      this.setState({ ITEMLIST: dummy })\n      var data = {\n        Section: e.target.id,\n        RestaurantName: localStorage.getItem('RestaurantName'),\n        Menu: this.state.ITEMLIST,\n        item: this.state.itemname,\n        cost: this.state.price\n      }\n      console.log(data)\n      //   axios\n      //     .post(`${ROOT_URL}/additems/`, data, {\n      //       headers: { Authorization: `Bearer ${localStorage.getItem('JWT')}` }\n      //     })\n      //     .then(response => {\n      //       console.log('Onclick')\n      //       console.log(dummy)\n      //       console.log(response.data)\n      //       if (response.data == 'Success') {\n      //         // dummy.push(data)\n      //         // this.setState({ ITEMLIST: dummy })\n      //         console.log(dummy)\n      //       }\n      //     })\n      //     .catch(() => {\n      //       console.log('Hello')\n      //       this.props.history.push('/owner/ownerlogin')\n      //     })\n      //   this.setState({ itemname: '' })\n      //   this.setState({ description: '' })\n      //   this.setState({ price: '' })\n      // }\n      console.log(localStorage.getItem('name'))\n      console.log(this.state.addcategory)\n      this.props.client\n        .mutate({\n          mutation: additem,\n          variables: {\n            email: localStorage.getItem('name'),\n            sectionName: e.target.id,\n            itemName: this.state.itemname,\n            itemDescription: this.state.description,\n            itemPrice: this.state.price\n          }\n        })\n        .then(response => {\n          console.log(response.data.additem)\n        })\n        .catch(err => {\n          console.log(err)\n        })\n    }\n  }\n  addcategory = e => {\n    console.log('here')\n    if (this.state.addcategory) {\n      e.preventDefault()\n\n      this.func()\n    }\n  }\n\n  updateItem (x, it) {\n    localStorage.setItem('updateitem', JSON.stringify(x))\n    localStorage.setItem('updatecategory', it.Section)\n    this.props.history.push('/owner/updateitem')\n  }\n  deleteCategory (it) {\n    console.log(it)\n    var array = this.state.ITEMLIST\n    console.log('Before Deletetion' + JSON.stringify(this.state.ITEMLIST))\n    for (var i in array) {\n      console.log('yo')\n      if (array[i].Section == it.Section) array.splice(i, 1)\n    }\n    console.log(array)\n    this.setState({ ITEMLIST: array })\n    var data = {\n      newmenu: this.state.ITEMLIST,\n      RestaurantName: localStorage.getItem('RestaurantName')\n    }\n    console.log(data)\n    // axios\n    //   .post(`${ROOT_URL}/deleteitems/`, data, {\n    //     headers: { Authorization: `Bearer ${localStorage.getItem('JWT')}` }\n    //   })\n    //   .then(response => {\n    //     console.log('Deleted')\n    //     console.log(response.data)\n    //   })\n  }\n  deleteItem (it) {\n    var deleteable = it.split('-')\n    console.log('Section and item' + deleteable)\n    var array = this.state.ITEMLIST // make a separate copy of the array\n    console.log(this.setState.ITEMLIST)\n    for (var i in array) {\n      if (array[i].Section === deleteable[0]) {\n        console.log('Index found' + i)\n        console.log(array[i]) // got section\n        for (var j in array[i].items) {\n          if (array[i].items[j].item == deleteable[1]) {\n            console.log('In second loop' + array[i].items[j].item)\n            break\n          }\n        }\n        array[i].items.splice(j, 1)\n        this.setState({ ITEMLIST: array })\n        console.log(this.setState.ITEMLIST)\n        {\n          var data = {\n            newmenu: this.state.ITEMLIST,\n            RestaurantName: localStorage.getItem('RestaurantName'),\n            item: deleteable[1]\n          }\n          console.log(data)\n          //   axios.post(`${ROOT_URL}/deleteitems/`, data).then(response => {\n          //     console.log('Deleted')\n          //     console.log(response.data)\n          //   })\n        }\n      }\n    }\n  }\n  handleChange = event => {\n    this.setState({\n      [event.target.id]: event.target.value\n    })\n  }\n  render () {\n    let redirectVar = null\n    let noitems = null\n    /* if (!cookie.load('owner')) {\n      console.log('checking redirection')\n      redirectVar = <Redirect to='/owner/ownerlogin' />\n    } */\n    var arr = this.state.ITEMLIST\n    console.log('length' + arr.length)\n    arr.forEach(x => {\n      console.log(x.Section)\n    })\n\n    setTimeout(function () {\n      console.log('Going to check length')\n    }, 2000)\n    if (arr.length === 0) {\n      noitems = null\n    } else {\n      if (this.state && this.state.ITEMLIST) {\n        noitems = (\n          <table class='table'>\n            <tbody>\n              {this.state.ITEMLIST.map(it => (\n                <tr key={it.Section}>\n                  <thead>\n                    <th>\n                      <td>\n                        <h3>SECTION NAME:{it.Section}</h3>\n                      </td>\n                    </th>\n                    <tr>\n                      <th scope='Restaurant'>ITEMS</th>\n\n                      <th>PRICE </th>\n                    </tr>\n                    {it.items ? it.items.length : 0}\n                  </thead>\n                  {it.items\n                    ? it.items.map(x => (\n                      <tr>\n                        <td>{x.item}</td>\n\n                        <td>{x.cost}</td>\n                      </tr>\n                    ))\n                    : null}\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )\n      }\n    }\n\n    return (\n      <div>\n        <form>\n          <div align='left'>\n            <input\n              id='addcategory'\n              type='text'\n              value={this.state.addcategory}\n              onChange={this.handleChange}\n              required\n            />\n\n            <button\n              id='addcategory'\n              className='btn btn-secondary m-2'\n              onClick={this.addcategory}\n            >\n              SEARCH\n            </button>\n          </div>\n        </form>\n        <div class='card text-center'>\n          <h1 className='btn-primary m-2'>\n            {localStorage.getItem('RestaurantName')} ALL RESTAURANT ITEMS\n          </h1>\n        </div>\n\n        {noitems}\n      </div>\n    )\n  }\n}\n\nexport default withApollo(Displayitems)\n"]},"metadata":{},"sourceType":"module"}