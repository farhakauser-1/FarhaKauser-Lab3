{"ast":null,"code":"import _defineProperty from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/src/components/Additems.js\";\nimport React, { Component } from 'react'; // import \"../../App.css\";\n\nimport axios from 'axios';\nimport cookie from 'react-cookies';\nimport { Redirect } from 'react-router';\n\nvar AddItems =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddItems, _Component);\n\n  function AddItems(props) {\n    var _this;\n\n    _classCallCheck(this, AddItems);\n\n    // Call the constrictor of Super class i.e The Component\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddItems).call(this, props)); // maintain the state required for this component\n\n    _this.addToMenu = function (e) {\n      if (_this.state.itemname && _this.state.description && _this.state.price) {\n        e.preventDefault();\n        var dummy = _this.state.ITEMLIST;\n        var data = {\n          itemname: _this.state.itemname,\n          description: _this.state.description,\n          price: _this.state.price,\n          RestaurantName: localStorage.getItem('RestaurantName'),\n          restid: localStorage.getItem('restid')\n        };\n        console.log(data);\n        axios.post(\"http://localhost:3100/insertitem/\", data).then(function (response) {\n          console.log('Onclick');\n          console.log(dummy);\n          console.log(response.data);\n\n          if (response.data == 'Success') {\n            dummy.push(data);\n\n            _this.setState({\n              ITEMLIST: dummy\n            });\n\n            console.log(dummy);\n          }\n        });\n\n        _this.setState({\n          itemname: ''\n        });\n\n        _this.setState({\n          description: ''\n        });\n\n        _this.setState({\n          price: ''\n        });\n      }\n    };\n\n    _this.handleChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.id, event.target.value));\n\n      console.log(event.target.id);\n    };\n\n    _this.state = {\n      nameOfRestaurant: localStorage.getItem('RestaurantName'),\n      ITEMLIST: [],\n      price: '',\n      description: '',\n      itemname: ''\n    };\n    _this.addToMenu = _this.addToMenu.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.deleteItem = _this.deleteItem.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.updateItem = _this.updateItem.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  } //   async componentDidMount () {\n  //     await axios\n  //       .get(`http://localhost:3100/restitems/${this.state.nameOfRestaurant}`)\n  //       .then(response => {\n  //         console.log('Onclick')\n  //         console.log(response.data)\n  //         if (response.data != 'No Such item') {\n  //           this.setState({ ITEMLIST: response.data }, () => {\n  //             console.log('new' + this.state.ITEMLIST)\n  //           })\n  //         }\n  //       })\n  //   }\n\n\n  _createClass(AddItems, [{\n    key: \"updateItem\",\n    value: function updateItem(it) {\n      localStorage.setItem('updateitem', JSON.stringify(it));\n      this.props.history.push('/owner/updateitem');\n    }\n  }, {\n    key: \"deleteItem\",\n    value: function deleteItem(it) {\n      console.log('In Delete' + it.itemname);\n      var array = this.state.ITEMLIST; // make a separate copy of the array\n\n      console.log(this.setState.ITEMLIST);\n\n      for (var i in array) {\n        if (array[i].itemname === it.itemname) {\n          console.log('Index found' + i);\n          console.log(array[i]);\n          array.splice(i, 1);\n          this.setState({\n            ITEMLIST: array\n          });\n          console.log(this.setState.ITEMLIST);\n          {\n            var data = {\n              itemname: it.itemname,\n              RestaurantName: localStorage.getItem('RestaurantName')\n            };\n            console.log(data);\n            axios.post(\"http://localhost:3100/deleteitem/\", data).then(function (response) {\n              console.log('Deleted');\n              console.log(response.data);\n            });\n          }\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var redirectVar = null;\n      var noitems = null;\n\n      if (!cookie.load('owner')) {\n        console.log('checking redirection');\n        redirectVar = React.createElement(Redirect, {\n          to: \"/owner/ownerlogin\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        });\n      }\n\n      var arr = this.state.ITEMLIST;\n      console.log('length' + arr.length);\n      setTimeout(function () {\n        console.log('Going to check length');\n      }, 5000);\n\n      if (arr.length === 0) {\n        noitems = null;\n      } else {\n        if (this.state && this.state.ITEMLIST) {\n          noitems = React.createElement(\"table\", {\n            class: \"table\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 118\n            },\n            __self: this\n          }, React.createElement(\"thead\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 119\n            },\n            __self: this\n          }, React.createElement(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 120\n            },\n            __self: this\n          }, React.createElement(\"th\", {\n            scope: \"Restaurant\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 121\n            },\n            __self: this\n          }, \"ITEMS\"), React.createElement(\"th\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 122\n            },\n            __self: this\n          }, \"DESCRIPTION \"), React.createElement(\"th\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 123\n            },\n            __self: this\n          }, \"PRICE \"))), React.createElement(\"tbody\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 126\n            },\n            __self: this\n          }, this.state.ITEMLIST.map(function (it) {\n            return React.createElement(\"tr\", {\n              key: it.itemname,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 128\n              },\n              __self: this\n            }, React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 129\n              },\n              __self: this\n            }, it.itemname), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 130\n              },\n              __self: this\n            }, it.description), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 131\n              },\n              __self: this\n            }, it.price), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 132\n              },\n              __self: this\n            }, React.createElement(\"button\", {\n              id: it.itemname,\n              className: \"btn btn-danger m-2\",\n              onClick: function onClick() {\n                return _this2.deleteItem(it);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 133\n              },\n              __self: this\n            }, \"DELETE\")), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 141\n              },\n              __self: this\n            }, React.createElement(\"button\", {\n              id: it.itemname,\n              className: \"btn btn-danger m-2\",\n              onClick: function onClick() {\n                return _this2.updateItem(it);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 142\n              },\n              __self: this\n            }, \"UPDATE\")));\n          })), noitems);\n        }\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, redirectVar, React.createElement(\"div\", {\n        class: \"card text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"btn-primary m-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, localStorage.getItem('RestaurantName'), \" RESTAURANT\")), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        class: \"table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        scope: \"Restaurant\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"ITEMS\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, \"DESCRIPTION \"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"PRICE \"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        id: \"itemname\",\n        type: \"text\",\n        onChange: this.handleChange,\n        value: this.state.itemname,\n        required: \"required\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        id: \"description\",\n        type: \"text\",\n        value: this.state.description,\n        onChange: this.handleChange,\n        required: \"required\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        id: \"price\",\n        type: \"number\",\n        value: this.state.price,\n        onChange: this.handleChange,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }))))), React.createElement(\"div\", {\n        align: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-primary m-2\",\n        onClick: this.addToMenu,\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"ADD ITEM TO MENU\"))), noitems);\n    }\n  }]);\n\n  return AddItems;\n}(Component);\n\nexport default AddItems;","map":{"version":3,"sources":["/Users/farha/Downloads/GraphQL/GraphQL/frontend/src/components/Additems.js"],"names":["React","Component","axios","cookie","Redirect","AddItems","props","addToMenu","e","state","itemname","description","price","preventDefault","dummy","ITEMLIST","data","RestaurantName","localStorage","getItem","restid","console","log","post","then","response","push","setState","handleChange","event","target","id","value","nameOfRestaurant","bind","deleteItem","updateItem","it","setItem","JSON","stringify","history","array","i","splice","redirectVar","noitems","load","arr","length","setTimeout","map"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC,C,CACA;;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,SAASC,QAAT,QAAyB,cAAzB;;IACMC,Q;;;;;AACJ,oBAAaC,KAAb,EAAoB;AAAA;;AAAA;;AAClB;AACA,kFAAMA,KAAN,GAFkB,CAGlB;;AAHkB,UA6BpBC,SA7BoB,GA6BR,UAAAC,CAAC,EAAI;AACf,UAAI,MAAKC,KAAL,CAAWC,QAAX,IAAuB,MAAKD,KAAL,CAAWE,WAAlC,IAAiD,MAAKF,KAAL,CAAWG,KAAhE,EAAuE;AACrEJ,QAAAA,CAAC,CAACK,cAAF;AACA,YAAIC,KAAK,GAAG,MAAKL,KAAL,CAAWM,QAAvB;AACA,YAAIC,IAAI,GAAG;AACTN,UAAAA,QAAQ,EAAE,MAAKD,KAAL,CAAWC,QADZ;AAETC,UAAAA,WAAW,EAAE,MAAKF,KAAL,CAAWE,WAFf;AAGTC,UAAAA,KAAK,EAAE,MAAKH,KAAL,CAAWG,KAHT;AAITK,UAAAA,cAAc,EAAEC,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAJP;AAKTC,UAAAA,MAAM,EAAEF,YAAY,CAACC,OAAb,CAAqB,QAArB;AALC,SAAX;AAOAE,QAAAA,OAAO,CAACC,GAAR,CAAYN,IAAZ;AACAd,QAAAA,KAAK,CAACqB,IAAN,sCAAgDP,IAAhD,EAAsDQ,IAAtD,CAA2D,UAAAC,QAAQ,EAAI;AACrEJ,UAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAD,UAAAA,OAAO,CAACC,GAAR,CAAYR,KAAZ;AACAO,UAAAA,OAAO,CAACC,GAAR,CAAYG,QAAQ,CAACT,IAArB;;AACA,cAAIS,QAAQ,CAACT,IAAT,IAAiB,SAArB,EAAgC;AAC9BF,YAAAA,KAAK,CAACY,IAAN,CAAWV,IAAX;;AACA,kBAAKW,QAAL,CAAc;AAAEZ,cAAAA,QAAQ,EAAED;AAAZ,aAAd;;AACAO,YAAAA,OAAO,CAACC,GAAR,CAAYR,KAAZ;AACD;AACF,SATD;;AAUA,cAAKa,QAAL,CAAc;AAAEjB,UAAAA,QAAQ,EAAE;AAAZ,SAAd;;AACA,cAAKiB,QAAL,CAAc;AAAEhB,UAAAA,WAAW,EAAE;AAAf,SAAd;;AACA,cAAKgB,QAAL,CAAc;AAAEf,UAAAA,KAAK,EAAE;AAAT,SAAd;AACD;AACF,KAvDmB;;AAAA,UAuFpBgB,YAvFoB,GAuFL,UAAAC,KAAK,EAAI;AACtB,YAAKF,QAAL,qBACGE,KAAK,CAACC,MAAN,CAAaC,EADhB,EACqBF,KAAK,CAACC,MAAN,CAAaE,KADlC;;AAGAX,MAAAA,OAAO,CAACC,GAAR,CAAYO,KAAK,CAACC,MAAN,CAAaC,EAAzB;AACD,KA5FmB;;AAIlB,UAAKtB,KAAL,GAAa;AACXwB,MAAAA,gBAAgB,EAAEf,YAAY,CAACC,OAAb,CAAqB,gBAArB,CADP;AAEXJ,MAAAA,QAAQ,EAAE,EAFC;AAGXH,MAAAA,KAAK,EAAE,EAHI;AAIXD,MAAAA,WAAW,EAAE,EAJF;AAKXD,MAAAA,QAAQ,EAAE;AALC,KAAb;AAOA,UAAKH,SAAL,GAAiB,MAAKA,SAAL,CAAe2B,IAAf,uDAAjB;AACA,UAAKN,YAAL,GAAoB,MAAKA,YAAL,CAAkBM,IAAlB,uDAApB;AACA,UAAKC,UAAL,GAAkB,MAAKA,UAAL,CAAgBD,IAAhB,uDAAlB;AACA,UAAKE,UAAL,GAAkB,MAAKA,UAAL,CAAgBF,IAAhB,uDAAlB;AAdkB;AAenB,G,CACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;+BA4BYG,E,EAAI;AACdnB,MAAAA,YAAY,CAACoB,OAAb,CAAqB,YAArB,EAAmCC,IAAI,CAACC,SAAL,CAAeH,EAAf,CAAnC;AACA,WAAK/B,KAAL,CAAWmC,OAAX,CAAmBf,IAAnB,CAAwB,mBAAxB;AACD;;;+BACWW,E,EAAI;AACdhB,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAce,EAAE,CAAC3B,QAA7B;AACA,UAAIgC,KAAK,GAAG,KAAKjC,KAAL,CAAWM,QAAvB,CAFc,CAEkB;;AAChCM,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKK,QAAL,CAAcZ,QAA1B;;AACA,WAAK,IAAI4B,CAAT,IAAcD,KAAd,EAAqB;AACnB,YAAIA,KAAK,CAACC,CAAD,CAAL,CAASjC,QAAT,KAAsB2B,EAAE,CAAC3B,QAA7B,EAAuC;AACrCW,UAAAA,OAAO,CAACC,GAAR,CAAY,gBAAgBqB,CAA5B;AACAtB,UAAAA,OAAO,CAACC,GAAR,CAAYoB,KAAK,CAACC,CAAD,CAAjB;AACAD,UAAAA,KAAK,CAACE,MAAN,CAAaD,CAAb,EAAgB,CAAhB;AACA,eAAKhB,QAAL,CAAc;AAAEZ,YAAAA,QAAQ,EAAE2B;AAAZ,WAAd;AACArB,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKK,QAAL,CAAcZ,QAA1B;AACA;AACE,gBAAIC,IAAI,GAAG;AACTN,cAAAA,QAAQ,EAAE2B,EAAE,CAAC3B,QADJ;AAETO,cAAAA,cAAc,EAAEC,YAAY,CAACC,OAAb,CAAqB,gBAArB;AAFP,aAAX;AAIAE,YAAAA,OAAO,CAACC,GAAR,CAAYN,IAAZ;AACAd,YAAAA,KAAK,CACFqB,IADH,sCAC6CP,IAD7C,EAEGQ,IAFH,CAEQ,UAAAC,QAAQ,EAAI;AAChBJ,cAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAD,cAAAA,OAAO,CAACC,GAAR,CAAYG,QAAQ,CAACT,IAArB;AACD,aALH;AAMD;AACF;AACF;AACF;;;6BAOS;AAAA;;AACR,UAAI6B,WAAW,GAAG,IAAlB;AACA,UAAIC,OAAO,GAAG,IAAd;;AAEA,UAAI,CAAC3C,MAAM,CAAC4C,IAAP,CAAY,OAAZ,CAAL,EAA2B;AACzB1B,QAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAuB,QAAAA,WAAW,GAAG,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAC,mBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAd;AACD;;AACD,UAAIG,GAAG,GAAG,KAAKvC,KAAL,CAAWM,QAArB;AACAM,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAW0B,GAAG,CAACC,MAA3B;AACAC,MAAAA,UAAU,CAAC,YAAY;AACrB7B,QAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACD,OAFS,EAEP,IAFO,CAAV;;AAGA,UAAI0B,GAAG,CAACC,MAAJ,KAAe,CAAnB,EAAsB;AACpBH,QAAAA,OAAO,GAAG,IAAV;AACD,OAFD,MAEO;AACL,YAAI,KAAKrC,KAAL,IAAc,KAAKA,KAAL,CAAWM,QAA7B,EAAuC;AACrC+B,UAAAA,OAAO,GACL;AAAO,YAAA,KAAK,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AAAI,YAAA,KAAK,EAAC,YAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHF,CADF,CADF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACG,KAAKrC,KAAL,CAAWM,QAAX,CAAoBoC,GAApB,CAAwB,UAAAd,EAAE;AAAA,mBACzB;AAAI,cAAA,GAAG,EAAEA,EAAE,CAAC3B,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAK2B,EAAE,CAAC3B,QAAR,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAK2B,EAAE,CAAC1B,WAAR,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAK0B,EAAE,CAACzB,KAAR,CAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACE;AACE,cAAA,EAAE,EAAEyB,EAAE,CAAC3B,QADT;AAEE,cAAA,SAAS,EAAC,oBAFZ;AAGE,cAAA,OAAO,EAAE;AAAA,uBAAM,MAAI,CAACyB,UAAL,CAAgBE,EAAhB,CAAN;AAAA,eAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,CAJF,EAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACE;AACE,cAAA,EAAE,EAAEA,EAAE,CAAC3B,QADT;AAEE,cAAA,SAAS,EAAC,oBAFZ;AAGE,cAAA,OAAO,EAAE;AAAA,uBAAM,MAAI,CAAC0B,UAAL,CAAgBC,EAAhB,CAAN;AAAA,eAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,CAbF,CADyB;AAAA,WAA1B,CADH,CARF,EAmCGS,OAnCH,CADF;AAuCD;AACF;;AAED,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGD,WADH,EAGE;AAAK,QAAA,KAAK,EAAC,kBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,SAAS,EAAC,iBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG3B,YAAY,CAACC,OAAb,CAAqB,gBAArB,CADH,gBADF,CAHF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAO,QAAA,KAAK,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,KAAK,EAAC,YAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHF,CADF,CADF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,EAAE,EAAC,UADL;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,QAAQ,EAAE,KAAKS,YAHjB;AAIE,QAAA,KAAK,EAAE,KAAKnB,KAAL,CAAWC,QAJpB;AAKE,QAAA,QAAQ,EAAC,UALX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,EAAE,EAAC,aADL;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,KAAK,EAAE,KAAKD,KAAL,CAAWE,WAHpB;AAIE,QAAA,QAAQ,EAAE,KAAKiB,YAJjB;AAKE,QAAA,QAAQ,EAAC,UALX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAVF,EAmBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,EAAE,EAAC,OADL;AAEE,QAAA,IAAI,EAAC,QAFP;AAGE,QAAA,KAAK,EAAE,KAAKnB,KAAL,CAAWG,KAHpB;AAIE,QAAA,QAAQ,EAAE,KAAKgB,YAJjB;AAKE,QAAA,QAAQ,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAnBF,CADF,CARF,CADF,EAyCE;AAAK,QAAA,KAAK,EAAC,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,SAAS,EAAC,qBADZ;AAEE,QAAA,OAAO,EAAE,KAAKrB,SAFhB;AAGE,QAAA,IAAI,EAAC,QAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,CAzCF,CARF,EA2DGuC,OA3DH,CADF;AA+DD;;;;EAxNoB7C,S;;AA2NvB,eAAeI,QAAf","sourcesContent":["import React, { Component } from 'react'\n// import \"../../App.css\";\nimport axios from 'axios'\nimport cookie from 'react-cookies'\nimport { Redirect } from 'react-router'\nclass AddItems extends Component {\n  constructor (props) {\n    // Call the constrictor of Super class i.e The Component\n    super(props)\n    // maintain the state required for this component\n    this.state = {\n      nameOfRestaurant: localStorage.getItem('RestaurantName'),\n      ITEMLIST: [],\n      price: '',\n      description: '',\n      itemname: ''\n    }\n    this.addToMenu = this.addToMenu.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n    this.deleteItem = this.deleteItem.bind(this)\n    this.updateItem = this.updateItem.bind(this)\n  }\n  //   async componentDidMount () {\n  //     await axios\n  //       .get(`http://localhost:3100/restitems/${this.state.nameOfRestaurant}`)\n  //       .then(response => {\n  //         console.log('Onclick')\n  //         console.log(response.data)\n  //         if (response.data != 'No Such item') {\n  //           this.setState({ ITEMLIST: response.data }, () => {\n  //             console.log('new' + this.state.ITEMLIST)\n  //           })\n  //         }\n  //       })\n  //   }\n  addToMenu = e => {\n    if (this.state.itemname && this.state.description && this.state.price) {\n      e.preventDefault()\n      var dummy = this.state.ITEMLIST\n      var data = {\n        itemname: this.state.itemname,\n        description: this.state.description,\n        price: this.state.price,\n        RestaurantName: localStorage.getItem('RestaurantName'),\n        restid: localStorage.getItem('restid')\n      }\n      console.log(data)\n      axios.post(`http://localhost:3100/insertitem/`, data).then(response => {\n        console.log('Onclick')\n        console.log(dummy)\n        console.log(response.data)\n        if (response.data == 'Success') {\n          dummy.push(data)\n          this.setState({ ITEMLIST: dummy })\n          console.log(dummy)\n        }\n      })\n      this.setState({ itemname: '' })\n      this.setState({ description: '' })\n      this.setState({ price: '' })\n    }\n  }\n  updateItem (it) {\n    localStorage.setItem('updateitem', JSON.stringify(it))\n    this.props.history.push('/owner/updateitem')\n  }\n  deleteItem (it) {\n    console.log('In Delete' + it.itemname)\n    var array = this.state.ITEMLIST // make a separate copy of the array\n    console.log(this.setState.ITEMLIST)\n    for (var i in array) {\n      if (array[i].itemname === it.itemname) {\n        console.log('Index found' + i)\n        console.log(array[i])\n        array.splice(i, 1)\n        this.setState({ ITEMLIST: array })\n        console.log(this.setState.ITEMLIST)\n        {\n          var data = {\n            itemname: it.itemname,\n            RestaurantName: localStorage.getItem('RestaurantName')\n          }\n          console.log(data)\n          axios\n            .post(`http://localhost:3100/deleteitem/`, data)\n            .then(response => {\n              console.log('Deleted')\n              console.log(response.data)\n            })\n        }\n      }\n    }\n  }\n  handleChange = event => {\n    this.setState({\n      [event.target.id]: event.target.value\n    })\n    console.log(event.target.id)\n  }\n  render () {\n    let redirectVar = null\n    let noitems = null\n\n    if (!cookie.load('owner')) {\n      console.log('checking redirection')\n      redirectVar = <Redirect to='/owner/ownerlogin' />\n    }\n    var arr = this.state.ITEMLIST\n    console.log('length' + arr.length)\n    setTimeout(function () {\n      console.log('Going to check length')\n    }, 5000)\n    if (arr.length === 0) {\n      noitems = null\n    } else {\n      if (this.state && this.state.ITEMLIST) {\n        noitems = (\n          <table class='table'>\n            <thead>\n              <tr>\n                <th scope='Restaurant'>ITEMS</th>\n                <th>DESCRIPTION </th>\n                <th>PRICE </th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.ITEMLIST.map(it => (\n                <tr key={it.itemname}>\n                  <td>{it.itemname}</td>\n                  <td>{it.description}</td>\n                  <td>{it.price}</td>\n                  <td>\n                    <button\n                      id={it.itemname}\n                      className='btn btn-danger m-2'\n                      onClick={() => this.deleteItem(it)}\n                    >\n                      DELETE\n                    </button>\n                  </td>\n                  <td>\n                    <button\n                      id={it.itemname}\n                      className='btn btn-danger m-2'\n                      onClick={() => this.updateItem(it)}\n                    >\n                      UPDATE\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n            {noitems}\n          </table>\n        )\n      }\n    }\n\n    return (\n      <div>\n        {redirectVar}\n\n        <div class='card text-center'>\n          <h1 className='btn-primary m-2'>\n            {localStorage.getItem('RestaurantName')} RESTAURANT\n          </h1>\n        </div>\n        <form>\n          <table class='table'>\n            <thead>\n              <tr>\n                <th scope='Restaurant'>ITEMS</th>\n                <th>DESCRIPTION </th>\n                <th>PRICE </th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td>\n                  <input\n                    id='itemname'\n                    type='text'\n                    onChange={this.handleChange}\n                    value={this.state.itemname}\n                    required='required'\n                  />\n                </td>\n                <td>\n                  <input\n                    id='description'\n                    type='text'\n                    value={this.state.description}\n                    onChange={this.handleChange}\n                    required='required'\n                  />\n                </td>\n                <td>\n                  <input\n                    id='price'\n                    type='number'\n                    value={this.state.price}\n                    onChange={this.handleChange}\n                    required\n                  />\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <div align='center'>\n            <button\n              className='btn btn-primary m-2'\n              onClick={this.addToMenu}\n              type='submit'\n            >\n              ADD ITEM TO MENU\n            </button>\n          </div>\n        </form>\n        {noitems}\n      </div>\n    )\n  }\n}\n\nexport default AddItems\n"]},"metadata":{},"sourceType":"module"}