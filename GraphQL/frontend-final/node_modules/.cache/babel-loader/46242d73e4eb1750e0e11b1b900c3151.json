{"ast":null,"code":"import _classCallCheck from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/farha/Downloads/GraphQL/GraphQL/frontend/src/components/Login.js\";\nimport React, { Component } from 'react';\nimport '../App.css'; // import { Redirect } from 'react-router'\n\nimport { graphql, compose } from 'react-apollo';\nimport { getBuyersQuery, login } from '../queries/queries';\nimport { withApollo } from 'react-apollo'; // Define a Login Component\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  // call the constructor method\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    // Call the constrictor of Super class i.e The Component\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props)); // maintain the state required for this component\n\n    _this.usernameChangeHandler = function (e) {\n      _this.setState({\n        username: e.target.value\n      });\n    };\n\n    _this.passwordChangeHandler = function (e) {\n      _this.setState({\n        password: e.target.value\n      });\n    };\n\n    _this.submitLogin = function (e) {\n      if (_this.state.username && _this.state.password) {\n        var headers = new Headers(); // prevent page from refresh\n\n        e.preventDefault();\n        console.log(_this.props);\n\n        _this.props.client.query({\n          query: login,\n          variables: {\n            email: _this.state.username\n          }\n        }).then(function (response) {\n          if (response.data.login) {\n            console.log(JSON.stringify(response.data.login));\n\n            if (_this.state.password == response.data.login.password) {\n              console.log('yes');\n            } else {\n              _this.setState({\n                isInvalid: 'true'\n              });\n            }\n          } else {\n            _this.setState({\n              isInvalid: 'true'\n            });\n          }\n        });\n      }\n    };\n\n    _this.state = {\n      username: '',\n      password: '',\n      authFlag: false,\n      isInvalid: false // Bind the handlers to this class\n\n    };\n    _this.usernameChangeHandler = _this.usernameChangeHandler.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.passwordChangeHandler = _this.passwordChangeHandler.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.submitLogin = _this.submitLogin.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  } // Call the Will Mount to set the auth Flag to false\n\n\n  _createClass(Login, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.setState({\n        authFlag: false\n      });\n    } // username change handler to update state variable with the text entered by the user\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      // redirect based on successful login\n      var redirectVar = null;\n      var isAuth = this.state.authFlag;\n      var isInvalid = this.state.isInvalid;\n      console.log(isAuth); // if (cookie.load('cookie')) {\n      //   console.log('checking redirection')\n      //   console.log(cookie.load('cookie'))\n      //   redirectVar = <Redirect to='/buyer/restorder' />\n      // }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, redirectVar, React.createElement(\"div\", {\n        class: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"login-form\",\n        align: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"main-div\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"panel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"Login using your GRUBHUB user account\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, !isInvalid ? '' : 'Invalid')), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group \",\n        align: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        onChange: this.usernameChangeHandler,\n        type: \"email\",\n        class: \"form-control\",\n        name: \"username\",\n        placeholder: \"Username\",\n        required: \"required\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        onChange: this.passwordChangeHandler,\n        type: \"password\",\n        class: \"form-control\",\n        name: \"password\",\n        placeholder: \"Password\",\n        required: \"required\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        type: \"submit\",\n        onClick: this.submitLogin,\n        class: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Login\"))))));\n    }\n  }]);\n\n  return Login;\n}(Component); // export Login Component\n// export default compose(graphql(getBuyersQuery, { name: 'getBuyersQuery' }))(\n//   Login\n// )\n\n\nexport default withApollo(Login);","map":{"version":3,"sources":["/Users/farha/Downloads/GraphQL/GraphQL/frontend/src/components/Login.js"],"names":["React","Component","graphql","compose","getBuyersQuery","login","withApollo","Login","props","usernameChangeHandler","e","setState","username","target","value","passwordChangeHandler","password","submitLogin","state","headers","Headers","preventDefault","console","log","client","query","variables","email","then","response","data","JSON","stringify","isInvalid","authFlag","bind","redirectVar","isAuth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport '../App.css'\n\n// import { Redirect } from 'react-router'\nimport { graphql, compose } from 'react-apollo'\nimport { getBuyersQuery, login } from '../queries/queries'\nimport { withApollo } from 'react-apollo'\n// Define a Login Component\nclass Login extends Component {\n  // call the constructor method\n  constructor (props) {\n    // Call the constrictor of Super class i.e The Component\n    super(props)\n    // maintain the state required for this component\n    this.state = {\n      username: '',\n      password: '',\n      authFlag: false,\n      isInvalid: false\n    }\n    // Bind the handlers to this class\n    this.usernameChangeHandler = this.usernameChangeHandler.bind(this)\n    this.passwordChangeHandler = this.passwordChangeHandler.bind(this)\n    this.submitLogin = this.submitLogin.bind(this)\n  }\n  // Call the Will Mount to set the auth Flag to false\n  componentWillMount () {\n    this.setState({\n      authFlag: false\n    })\n  }\n  // username change handler to update state variable with the text entered by the user\n  usernameChangeHandler = e => {\n    this.setState({\n      username: e.target.value\n    })\n  }\n  // password change handler to update state variable with the text entered by the user\n  passwordChangeHandler = e => {\n    this.setState({\n      password: e.target.value\n    })\n  }\n  // submit Login handler to send a request to the node backend\n  submitLogin = e => {\n    if (this.state.username && this.state.password) {\n      var headers = new Headers()\n      // prevent page from refresh\n      e.preventDefault()\n\n      console.log(this.props)\n\n      this.props.client\n        .query({\n          query: login,\n          variables: {\n            email: this.state.username\n          }\n        })\n        .then(response => {\n          if (response.data.login) {\n            console.log(JSON.stringify(response.data.login))\n            if (this.state.password == response.data.login.password) {\n              console.log('yes')\n            } else {\n              this.setState({ isInvalid: 'true' })\n            }\n          } else {\n            this.setState({ isInvalid: 'true' })\n          }\n        })\n    }\n  }\n  render () {\n    // redirect based on successful login\n    let redirectVar = null\n    const isAuth = this.state.authFlag\n    const isInvalid = this.state.isInvalid\n    console.log(isAuth)\n\n    // if (cookie.load('cookie')) {\n    //   console.log('checking redirection')\n    //   console.log(cookie.load('cookie'))\n    //   redirectVar = <Redirect to='/buyer/restorder' />\n    // }\n\n    return (\n      <div>\n        {redirectVar}\n        <div class='container'>\n          <div class='login-form' align='center'>\n            <div class='main-div'>\n              <div class='panel'>\n                <h2>Login using your GRUBHUB user account</h2>\n                <div>{!isInvalid ? '' : 'Invalid'}</div>\n              </div>\n              <form>\n                <div class='form-group ' align='center'>\n                  <input\n                    onChange={this.usernameChangeHandler}\n                    type='email'\n                    class='form-control'\n                    name='username'\n                    placeholder='Username'\n                    required='required'\n                  />\n                </div>\n                <div class='form-group'>\n                  <input\n                    onChange={this.passwordChangeHandler}\n                    type='password'\n                    class='form-control'\n                    name='password'\n                    placeholder='Password'\n                    required='required'\n                  />\n                </div>\n                <button\n                  type='submit'\n                  onClick={this.submitLogin}\n                  class='btn btn-primary'\n                >\n                  Login\n                </button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n// export Login Component\n// export default compose(graphql(getBuyersQuery, { name: 'getBuyersQuery' }))(\n//   Login\n// )\n\nexport default withApollo(Login)\n"]},"metadata":{},"sourceType":"module"}